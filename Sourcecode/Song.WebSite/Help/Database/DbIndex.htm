<!DOCTYPE html>
<html lang="en">

<head resource>
    <meta charset="utf-8">
    <meta view="DbIndex" page="/Help/DataBase/DbIndex.htm" />
    <title>数据库索引</title>
    <script type="text/javascript" src="/Utilities/Scripts/webdom.js"></script>
    <script type="text/javascript" src="../Scripts/core.js"></script>
</head>

<body>
    <div id="vapp" v-cloak>
        <!--左侧数据库表的列表-->
        <entities @selected="setentity"></entities>
        <!--表结构的详情-->
        <div id="content" v-if="entity!=null">
            <div class="entity_header">
                <div class="name">
                    <span @dblclick="copy(entity.name)" title="双击复制"> {{entity.index+1}}. {{entity.name}}</span>
                    <span class="mark">{{entity.mark}}</span>
                </div>
                <div class="intro">
                    <span>说明：<span v-html="entity.intro"></span>
                </div>
            </div>
            <p v-if="dbType!='PostgreSQL'">
                <warning>
                    仅支持PostgreSQL数据库的索引查询
                </warning>
            </p>
            <template v-else>
                <loading v-if="loading"> loading ...</loading>
                <div v-else class="entity_indexs">
                    <p>当前表共 {{indexs.length}} 个索引</p>

                    <table border="0" v-if="dbType=='PostgreSQL'">
                        <thead>
                            <tr>
                                <th width="50px">序号</th>
                                <th width="200px">索引名称</th>
                                <th class="columns">字段</th>
                                <th>脚本</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="(item,idx) in indexs">
                                <td>{{idx+1}}</td>
                                <td>{{item.name}}</td>
                                <td class="columns">
                                    <div v-for="(col,idx) in item.columnname">
                                        {{col.column}} <el-tag type="danger" v-if="col.sort=='ASC'"> {{col.sort}}</el-tag>
                                        <el-tag type="warning" v-else> {{col.sort}}</el-tag>
                                    </div>
                                
                                </td>
                                <td>{{item.indexdef}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </template>
        </div>
    </div>
</body>

</html>