<!DOCTYPE html>
<html lang="en">

<head resource>
    <meta charset="utf-8">
    <meta view="Detail" page="/Help/DataBase/Detail.htm" />
    <title>数据库说明</title>
    <script type="text/javascript" src="/Utilities/Scripts/webdom.js"></script>
    <script type="text/javascript" src="../Scripts/core.js"></script>
</head>

<body>
    <div id="vapp" v-cloak>
        <alert>该部分内容主要用于辅助开发，出于安全考虑，只允许在本机访问。如果运行于生产环境，建议删除“/help/database”文件夹。</alert>
        <p>当前系统同时支持 Postgresql 和 SQLite，以及MSSQL Server。考虑到后续将跨平台部署，MSSQL Server将逐渐放弃。</p>
        <p>在v2版本中，仍然支持MSSQL Server数据库，但不再提供升级脚本，后续在v3版本中将完全放弃对MSSQL Server的支持。需要持续跟进升级的用户，以及二次开发的用户，建议即时迁移到Postgresql数据库。</p>

        <hr />
        <p>社区版采用 SQLite 数据库，初次部署默认就是 SQLite 数据库，无须安装与配置数据库连接，直接使用即可。</p>
        <p>商业版采用 Postgresql 数据库，需要安装部署，并在db.config中配置好连接信息。点击此处 <a href="https://www.postgresql.org/download/" target="_blank">下载Postgresql数据库</a></p>
        <div class="tip">
            当前数据库： <loading v-if="loading"></loading>
            <template v-else>
                <template v-if="dbType!=''"><span class="dbtype" v-html="dbType"></span>
                    <br />
                    <span v-html="verison"></span>
                </template>
                <warning v-else>未检测到数据库</warning>
            </template>
        </div>
        <hr />
        <section class="datainfo">
            <el-statistic v-loading="loading.table" group-separator="," :value="total" title="总记录数">
            </el-statistic>
            <el-statistic v-loading="loading.table" :value="tablecount" title="表">
                <span slot="title">
                    <icon slot="prefix">&#xa02c</icon>表
                </span>
            </el-statistic>
            <el-statistic v-loading="loading.field" :value="fieldcount" title="字段">
                <span slot="title">
                    <icon slot="prefix" large>&#xe6cb</icon>字段
                </span>
            </el-statistic>
            <el-statistic v-loading="loading.index" :value="indexcount">
                <span slot="title">
                    <icon slot="prefix" huge>&#xb006</icon>索引
                </span>
            </el-statistic>

        </section>
        <hr />
        <template v-if="tablecount>0">
            <p>以下是当前数据库中各个表的数据量：</p>
            <section class="tabledata">
                <el-statistic v-for="(val,key,idx) in tables" :value="val" :title="key" group-separator=","
                    v-if="val>0">
                    <icon slot="title">{{idx+1}} . {{key}}</icon>
                </el-statistic>

            </section>
        </template>
    </div>
</body>

</html>